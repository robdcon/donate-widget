<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Donate Widget Integration Options - Test Page</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      color: #333;
      background: #f5f5f5;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
    }
    
    header {
      background: linear-gradient(135deg, #00853E 0%, #006B32 100%);
      color: white;
      padding: 60px 20px;
      text-align: center;
      margin-bottom: 40px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0, 133, 62, 0.3);
    }
    
    h1 {
      font-size: 36px;
      margin-bottom: 10px;
    }
    
    h2 {
      font-size: 28px;
      margin-top: 40px;
      margin-bottom: 20px;
      color: #00853E;
      border-bottom: 3px solid #00853E;
      padding-bottom: 10px;
    }
    
    h3 {
      font-size: 20px;
      margin-top: 30px;
      margin-bottom: 15px;
      color: #006B32;
    }
    
    .option-card {
      background: white;
      padding: 40px;
      border-radius: 12px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
      margin-bottom: 40px;
    }
    
    .option-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 30px;
      margin: 30px 0;
    }
    
    .option-box {
      background: #E8F5E9;
      padding: 30px;
      border-radius: 8px;
      border: 2px solid #00853E;
    }
    
    .option-box h4 {
      color: #00853E;
      font-size: 20px;
      margin-bottom: 15px;
    }
    
    .option-box ul {
      list-style: none;
      padding: 0;
    }
    
    .option-box li {
      padding: 8px 0;
      padding-left: 24px;
      position: relative;
    }
    
    .option-box li:before {
      content: '‚úì';
      position: absolute;
      left: 0;
      color: #00853E;
      font-weight: bold;
    }
    
    pre {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 20px;
      border-radius: 8px;
      overflow-x: auto;
      font-size: 14px;
      line-height: 1.6;
      margin: 20px 0;
    }
    
    code {
      font-family: 'Courier New', monospace;
    }
    
    .demo-section {
      background: white;
      padding: 40px;
      border-radius: 12px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
      margin: 40px 0;
    }
    
    .demo-controls {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      margin: 20px 0;
    }
    
    button {
      background: #00853E;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(0, 133, 62, 0.3);
    }
    
    button:hover {
      background: #006B32;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 133, 62, 0.4);
    }
    
    button.secondary {
      background: #666;
    }
    
    button.secondary:hover {
      background: #444;
    }
    
    .inline-demo {
      background: #f8f8f8;
      border: 2px dashed #00853E;
      border-radius: 8px;
      padding: 20px;
      margin: 30px 0;
      min-height: 200px;
    }
    
    .inline-demo.empty:before {
      content: 'Widget will appear here ‚Üì';
      display: block;
      text-align: center;
      color: #999;
      padding: 40px;
      font-size: 18px;
    }
    
    #widget-target-1 {
      /* Inline widget will be injected here */
    }
    
    #widget-target-2 {
      /* Second example */
    }
    
    .info-box {
      background: #E3F2FD;
      border-left: 4px solid #2196F3;
      padding: 20px;
      margin: 20px 0;
      border-radius: 4px;
    }
    
    .success-box {
      background: #E8F5E9;
      border-left: 4px solid #4CAF50;
      padding: 20px;
      margin: 20px 0;
      border-radius: 4px;
    }
    
    .warning-box {
      background: #FFF3CD;
      border-left: 4px solid #FFC107;
      padding: 20px;
      margin: 20px 0;
      border-radius: 4px;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
      background: white;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }
    
    th, td {
      padding: 15px;
      text-align: left;
      border-bottom: 1px solid #e0e0e0;
    }
    
    th {
      background: #00853E;
      color: white;
      font-weight: 600;
    }
    
    tr:hover {
      background: #f8f8f8;
    }
    
    .comparison {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin: 30px 0;
    }
    
    @media (max-width: 768px) {
      .comparison {
        grid-template-columns: 1fr;
      }
      
      h1 {
        font-size: 28px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üéØ Macmillan Donate Widget</h1>
      <p style="font-size: 20px; margin-top: 10px;">Two Integration Options for GTM</p>
    </header>
    
    <!-- Comparison -->
    <div class="option-card">
      <h2>Choose Your Integration Method</h2>
      
      <div class="option-grid">
        <div class="option-box">
          <h4>üîò Option 1: Floating Button</h4>
          <p style="margin-bottom: 15px;"><strong>Best for:</strong> All pages, global presence</p>
          <ul>
            <li>Appears on every page</li>
            <li>Fixed position (bottom corner)</li>
            <li>Opens in modal overlay</li>
            <li>Non-intrusive</li>
            <li>Always accessible</li>
          </ul>
        </div>
        
        <div class="option-box">
          <h4>üìÑ Option 2: Inline Section</h4>
          <p style="margin-bottom: 15px;"><strong>Best for:</strong> Dedicated donate pages</p>
          <ul>
            <li>Embedded in page content</li>
            <li>Inject at specific location</li>
            <li>No modal overlay</li>
            <li>Part of page flow</li>
            <li>Target specific pages</li>
          </ul>
        </div>
      </div>
    </div>
    
    <!-- Option 1: Floating Button -->
    <div class="option-card">
      <h2>üîò Option 1: Floating Button</h2>
      
      <div class="success-box">
        <strong>‚úì Active on this page!</strong> Look for the floating button in the bottom-right corner.
      </div>
      
      <h3>GTM Implementation:</h3>
      <pre><code>&lt;script src="https://donate-widget-7rbvheu4a-robdcons-projects.vercel.app/donate-button.js"&gt;&lt;/script&gt;</code></pre>
      
      <h3>With Custom Configuration:</h3>
      <pre><code>&lt;script&gt;
  window.MACMILLAN_DONATE_CONFIG = {
    position: 'bottom-right',    // 'bottom-left', 'top-right', 'top-left'
    buttonText: 'Donate',
    buttonColor: '#00853E',
    buttonHoverColor: '#006B32'
  };
&lt;/script&gt;
&lt;script src="https://donate-widget-7rbvheu4a-robdcons-projects.vercel.app/donate-button.js"&gt;&lt;/script&gt;</code></pre>
      
      <h3>Manual Controls:</h3>
      <div class="demo-controls">
        <button onclick="window.MacmillanDonateButton.open()">Open Modal</button>
        <button onclick="window.MacmillanDonateButton.close()" class="secondary">Close Modal</button>
        <button onclick="console.log(window.MacmillanDonateButton.config)" class="secondary">Log Config</button>
      </div>
      
      <h3>Use Cases:</h3>
      <ul style="margin-left: 20px;">
        <li>Global site-wide presence</li>
        <li>Blog posts and articles</li>
        <li>Campaign landing pages</li>
        <li>Homepage and navigation pages</li>
      </ul>
    </div>
    
    <!-- Option 2: Inline Section -->
    <div class="option-card">
      <h2>üìÑ Option 2: Inline Section</h2>
      
      <h3>GTM Implementation:</h3>
      <pre><code>&lt;script&gt;
  window.MACMILLAN_DONATE_SECTION_CONFIG = {
    selector: '#donate-widget',   // CSS selector where to inject
    position: 'beforeend',        // 'beforebegin', 'afterbegin', 'beforeend', 'afterend'
    amount: 25,                   // Optional: pre-fill amount
    type: 'monthly',              // Optional: 'one-time' or 'monthly'
    wrapper: true,                // Add styled wrapper
    autoResize: true              // Auto-resize iframe
  };
&lt;/script&gt;
&lt;script src="https://donate-widget-7rbvheu4a-robdcons-projects.vercel.app/donate-section.js"&gt;&lt;/script&gt;</code></pre>
      
      <h3>Configuration Options:</h3>
      <table>
        <thead>
          <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Default</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>selector</code></td>
            <td>String</td>
            <td>'#donate-widget'</td>
            <td>CSS selector for injection point (required)</td>
          </tr>
          <tr>
            <td><code>position</code></td>
            <td>String</td>
            <td>'beforeend'</td>
            <td>Where to inject: beforebegin, afterbegin, beforeend, afterend</td>
          </tr>
          <tr>
            <td><code>amount</code></td>
            <td>Number</td>
            <td>null</td>
            <td>Pre-fill donation amount</td>
          </tr>
          <tr>
            <td><code>type</code></td>
            <td>String</td>
            <td>null</td>
            <td>Pre-fill donation type: 'one-time' or 'monthly'</td>
          </tr>
          <tr>
            <td><code>wrapper</code></td>
            <td>Boolean</td>
            <td>true</td>
            <td>Add styled wrapper with padding/background</td>
          </tr>
          <tr>
            <td><code>autoResize</code></td>
            <td>Boolean</td>
            <td>true</td>
            <td>Automatically resize iframe to content</td>
          </tr>
        </tbody>
      </table>
      
      <h3>Live Demo - Example 1: Basic Injection</h3>
      <div class="info-box">
        <strong>Target:</strong> <code>#widget-target-1</code> - Widget will be injected inside this div
      </div>
      <div class="demo-controls">
        <button onclick="injectWidget1()">Inject Widget</button>
        <button onclick="removeWidget1()" class="secondary">Remove Widget</button>
      </div>
      <div id="widget-target-1" class="inline-demo empty"></div>
      
      <h3>Live Demo - Example 2: Pre-filled Amount</h3>
      <div class="info-box">
        <strong>Target:</strong> <code>#widget-target-2</code> - Pre-filled with ¬£50 monthly donation
      </div>
      <div class="demo-controls">
        <button onclick="injectWidget2()">Inject Widget (¬£50 Monthly)</button>
        <button onclick="removeWidget2()" class="secondary">Remove Widget</button>
      </div>
      <div id="widget-target-2" class="inline-demo empty"></div>
      
      <h3>Manual API:</h3>
      <pre><code>// Inject widget
window.MacmillanDonateSection.inject();

// Remove widget
window.MacmillanDonateSection.remove();

// Update configuration and re-inject
window.MacmillanDonateSection.updateConfig({
  amount: 100,
  type: 'one-time'
});

// Check config
console.log(window.MacmillanDonateSection.config);</code></pre>
      
      <h3>Use Cases:</h3>
      <ul style="margin-left: 20px;">
        <li>Dedicated /donate page</li>
        <li>Campaign-specific pages</li>
        <li>In-content donations (after articles)</li>
        <li>Thank you pages</li>
        <li>Event registration pages</li>
      </ul>
    </div>
    
    <!-- Comparison Table -->
    <div class="option-card">
      <h2>üìä Feature Comparison</h2>
      
      <table>
        <thead>
          <tr>
            <th>Feature</th>
            <th>Floating Button</th>
            <th>Inline Section</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Visibility</td>
            <td>Always visible, all pages</td>
            <td>Only on target pages</td>
          </tr>
          <tr>
            <td>Position</td>
            <td>Fixed corner (configurable)</td>
            <td>Specific page location (selector-based)</td>
          </tr>
          <tr>
            <td>User Experience</td>
            <td>Modal overlay (popup)</td>
            <td>Inline with page content</td>
          </tr>
          <tr>
            <td>Page Integration</td>
            <td>Overlays existing content</td>
            <td>Becomes part of page flow</td>
          </tr>
          <tr>
            <td>GTM Trigger</td>
            <td>All Pages or global</td>
            <td>Specific pages (URL contains /donate)</td>
          </tr>
          <tr>
            <td>Pre-fill Options</td>
            <td>Via query params only</td>
            <td>Via config (amount, type)</td>
          </tr>
          <tr>
            <td>Auto-Resize</td>
            <td>Yes</td>
            <td>Yes</td>
          </tr>
          <tr>
            <td>GTM Events</td>
            <td>Yes (modal open/close)</td>
            <td>Yes (inject/remove)</td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <!-- Both Together -->
    <div class="option-card">
      <h2>üé® Can I Use Both?</h2>
      
      <div class="success-box">
        <strong>Yes!</strong> You can use both integration methods together:
        <ul style="margin-top: 10px; margin-left: 20px;">
          <li><strong>Floating button</strong> on all pages for convenience</li>
          <li><strong>Inline section</strong> on dedicated /donate page for focused experience</li>
        </ul>
      </div>
      
      <h3>GTM Setup for Both:</h3>
      
      <div class="warning-box">
        <strong>Important:</strong> Create separate GTM tags with different triggers
      </div>
      
      <h4>Tag 1: Floating Button (All Pages)</h4>
      <pre><code>&lt;!-- Trigger: All Pages --&gt;
&lt;script src="https://donate-widget-7rbvheu4a-robdcons-projects.vercel.app/donate-button.js"&gt;&lt;/script&gt;</code></pre>
      
      <h4>Tag 2: Inline Section (Donate Page Only)</h4>
      <pre><code>&lt;!-- Trigger: Page Path contains "/donate" --&gt;
&lt;script&gt;
  window.MACMILLAN_DONATE_SECTION_CONFIG = {
    selector: '#main-content',
    position: 'beforeend'
  };
&lt;/script&gt;
&lt;script src="https://donate-widget-7rbvheu4a-robdcons-projects.vercel.app/donate-section.js"&gt;&lt;/script&gt;</code></pre>
    </div>
    
    <!-- GTM Events -->
    <div class="option-card">
      <h2>üìä GTM Events Tracked</h2>
      
      <h3>Floating Button Events:</h3>
      <ul style="margin-left: 20px;">
        <li><code>donate_modal_opened</code> - User clicks floating button</li>
        <li><code>donate_modal_closed</code> - User closes modal</li>
        <li><code>donation_complete</code> - Donation successful</li>
      </ul>
      
      <h3>Inline Section Events:</h3>
      <ul style="margin-left: 20px;">
        <li><code>donate_widget_injected</code> - Widget injected into page</li>
        <li><code>donate_widget_removed</code> - Widget removed from page</li>
        <li><code>donation_complete</code> - Donation successful</li>
      </ul>
    </div>
    
    <!-- Production Checklist -->
    <div class="option-card">
      <h2>‚úÖ Production Checklist</h2>
      
      <h3>Before Going Live:</h3>
      <ul style="margin-left: 20px; line-height: 2;">
        <li>‚òê Test both integration methods in GTM Preview mode</li>
        <li>‚òê Verify on mobile devices (iOS Safari, Chrome Mobile)</li>
        <li>‚òê Check button/widget position on all target pages</li>
        <li>‚òê Test donation flow end-to-end</li>
        <li>‚òê Verify GTM events fire correctly</li>
        <li>‚òê Test ESC key (floating button only)</li>
        <li>‚òê Test modal backdrop click (floating button only)</li>
        <li>‚òê Verify auto-resize works</li>
        <li>‚òê Check CSS selector accuracy (inline section)</li>
        <li>‚òê Test on different browsers</li>
      </ul>
    </div>
  </div>
  
  <!-- Load floating button (Option 1) -->
  <script src="/donate-button.js"></script>
  
  <!-- Demo functions for inline section (Option 2) -->
  <script>
    function injectWidget1() {
      // Create a temporary script element
      const script = document.createElement('script');
      script.textContent = `
        window.MACMILLAN_DONATE_SECTION_CONFIG = {
          selector: '#widget-target-1',
          position: 'beforeend',
          wrapper: true
        };
      `;
      document.head.appendChild(script);
      
      // Load the section script
      const sectionScript = document.createElement('script');
      sectionScript.src = '/donate-section.js';
      document.head.appendChild(sectionScript);
      
      // Remove empty class
      document.getElementById('widget-target-1').classList.remove('empty');
    }
    
    function removeWidget1() {
      if (window.MacmillanDonateSection) {
        window.MacmillanDonateSection.remove();
        document.getElementById('widget-target-1').classList.add('empty');
      }
    }
    
    function injectWidget2() {
      // Create config for pre-filled widget
      window.MACMILLAN_DONATE_SECTION_CONFIG_2 = {
        selector: '#widget-target-2',
        position: 'beforeend',
        amount: 50,
        type: 'monthly',
        wrapper: true
      };
      
      // Custom injection
      const targetElement = document.querySelector('#widget-target-2');
      if (!targetElement) return;
      
      const container = document.createElement('div');
      container.style.padding = '40px 20px';
      container.style.background = '#f8f8f8';
      container.style.borderRadius = '8px';
      
      const iframe = document.createElement('iframe');
      iframe.src = 'https://donate-widget-7rbvheu4a-robdcons-projects.vercel.app/embed?amount=50&type=monthly';
      iframe.style.width = '100%';
      iframe.style.minHeight = '600px';
      iframe.style.border = 'none';
      iframe.setAttribute('frameborder', '0');
      iframe.setAttribute('scrolling', 'no');
      
      container.appendChild(iframe);
      targetElement.appendChild(container);
      targetElement.classList.remove('empty');
    }
    
    function removeWidget2() {
      const target = document.getElementById('widget-target-2');
      target.innerHTML = '';
      target.classList.add('empty');
    }
  </script>
</body>
</html>
